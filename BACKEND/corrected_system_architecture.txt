#############################################################
# Corrected System Architecture Diagram (Textual Nodes)
#############################################################

## High-Level Overview
User Entry
  |
Frontend Application (Next.js / Vercel)
  |
  |-- GET /reco (returns JSON recommendations)
  |-- GET /pdf (returns JSON for form information)
  |-- POST /update_embeddings (admin/internal)
  |
Flask API Container
  |
  |-- Flask Routes
      |-- PDF Parser (GET /pdf)
      |-- Matching & Filters (GET /reco)
      |-- Embedding Engine (POST /update_embeddings)
  |
  |-- SentenceTransformer Model (loaded at startup)
  |-- Nominatim Geocoder (optional, for location geocoding)
  |
Supabase Database (all persistence)

## Internal Flask Container Breakdown
- Flask Routes
- PDF Parser
- Matching & Filters
- Embedding Engine
- Supabase DB
- SentenceTransformer Model
- Nominatim Geocoder (optional)

## Endpoints
- GET /pdf : Download and parse PDF, return structured resume JSON
- GET /reco : Read applicant, internships, interactions from Supabase, filter & enrich, return recommendations
- POST /update_embeddings : Batch recompute embeddings, persist vectors in Supabase

## Sequence (Abbreviated)
Frontend -> Flask API -> Supabase DB -> (optional) Geocoder -> Flask API -> Frontend

## Notes
- Stateless container; all persistence in Supabase
- Embedding model loaded once at startup
- Geocoding is optional
- /update_embeddings should be protected

#############################################################
# End (Corrected)
#############################################################
